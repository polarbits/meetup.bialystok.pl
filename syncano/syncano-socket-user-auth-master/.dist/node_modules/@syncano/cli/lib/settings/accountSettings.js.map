{"version":3,"sources":["../../src/settings/accountSettings.js"],"names":["debug","AccountSettings","constructor","name","process","env","SYNCANO_ACCOUNT_FILE","baseDir","homedir","loaded","load","logout","attributes","auth_key","save","authenticated","Boolean","getAuthKey","SYNCANO_AUTH_KEY","addProject","projectName","params","projects","getProject","envInstance","SYNCANO_PROJECT_INSTANCE","instance"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,MAAM,EAAEA,KAAF,KAAY,qBAAO,kBAAP,CAAlB;;AAEe,MAAMC,eAAN,4BAAuC;AACpDC,gBAAe;AACb;AACA,SAAKC,IAAL,GAAYC,QAAQC,GAAR,CAAYC,oBAAZ,GAAmCF,QAAQC,GAAR,CAAYC,oBAA/C,GAAsE,SAAlF;AACA,SAAKC,OAAL,GAAe,aAAGC,OAAH,EAAf;AACA,SAAKC,MAAL,GAAc,KAAKC,IAAL,EAAd;AACD;;AAEDC,WAAU;AACRX,UAAM,UAAN;AACA,WAAO,KAAKY,UAAL,CAAgBC,QAAvB;AACA,SAAKC,IAAL;AACD;;AAEDC,kBAAiB;AACf,WAAOC,QAAQ,KAAKC,UAAL,EAAR,CAAP;AACD;;AAEDA,eAAc;AACZ,WAAOb,QAAQC,GAAR,CAAYa,gBAAZ,IAAgC,KAAKN,UAAL,CAAgBC,QAAhD,IAA4D,IAAnE;AACD;;AAEDM,aAAYC,WAAZ,EAAyBC,SAAS,EAAlC,EAAsC;AACpCrB,UAAM,cAAN,EAAsBoB,WAAtB;AACA,QAAI,CAAC,KAAKR,UAAL,CAAgBU,QAArB,EAA+B;AAC7B,WAAKV,UAAL,CAAgBU,QAAhB,GAA2B,EAA3B;AACD;AACD,SAAKV,UAAL,CAAgBU,QAAhB,CAAyBF,WAAzB,IAAwCC,MAAxC;AACA,SAAKP,IAAL;AACD;;AAEDS,aAAYH,WAAZ,EAAyB;AACvBpB,UAAM,cAAN,EAAsBoB,WAAtB;AACA,UAAMI,cAAcpB,QAAQC,GAAR,CAAYoB,wBAAhC;AACA,QAAID,WAAJ,EAAiB;AACf,aAAO,EAAEE,UAAUF,WAAZ,EAAP;AACD;AACD,QAAI,KAAKZ,UAAL,CAAgBU,QAApB,EAA8B;AAC5B,aAAO,KAAKV,UAAL,CAAgBU,QAAhB,CAAyBF,WAAzB,CAAP;AACD;AACF;AAxCmD;kBAAjCnB,e","file":"accountSettings.js","sourcesContent":["import os from 'os'\nimport Settings from './settings'\nimport logger from '../utils/debug'\n\nconst { debug } = logger('settings-account')\n\nexport default class AccountSettings extends Settings {\n  constructor () {\n    super()\n    this.name = process.env.SYNCANO_ACCOUNT_FILE ? process.env.SYNCANO_ACCOUNT_FILE : 'syncano'\n    this.baseDir = os.homedir()\n    this.loaded = this.load()\n  }\n\n  logout () {\n    debug('logout()')\n    delete this.attributes.auth_key\n    this.save()\n  }\n\n  authenticated () {\n    return Boolean(this.getAuthKey())\n  }\n\n  getAuthKey () {\n    return process.env.SYNCANO_AUTH_KEY || this.attributes.auth_key || null\n  }\n\n  addProject (projectName, params = {}) {\n    debug('addProject()', projectName)\n    if (!this.attributes.projects) {\n      this.attributes.projects = {}\n    }\n    this.attributes.projects[projectName] = params\n    this.save()\n  }\n\n  getProject (projectName) {\n    debug('getProject()', projectName)\n    const envInstance = process.env.SYNCANO_PROJECT_INSTANCE\n    if (envInstance) {\n      return { instance: envInstance }\n    }\n    if (this.attributes.projects) {\n      return this.attributes.projects[projectName]\n    }\n  }\n}\n"]}