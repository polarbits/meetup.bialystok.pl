{"version":3,"sources":["../../src/commands/hosting-list.js"],"names":["HostingListCmd","constructor","context","session","run","cmd","hostings","list","printHostings","printNoHostingsInfo","cyan","length","process","exit","forEach","printHosting","bind","hosting","cname","getCnameURL","dim","name","existRemotely","getURL","config","browser_router","green","red","magenta","isUpToDate","error","errorResponses"],"mappings":";;;;;;AAAA;;;;AAEA;;AACA;;;;;;;;AAEA,MAAMA,cAAN,CAAqB;AACnBC,cAAaC,OAAb,EAAsB;AACpB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,OAAL,GAAeD,QAAQC,OAAvB;AACD;;AAEKC,KAAN,CAAW,CAACC,GAAD,CAAX,EAAkB;AAAA;;AAAA;AAChB,YAAKA,GAAL,GAAWA,GAAX;AACA,YAAMC,WAAW,MAAM,kBAAQC,IAAR,EAAvB;AACAP,qBAAeQ,aAAf,CAA6BF,QAA7B;AAHgB;AAIjB;;AAED,SAAOG,mBAAP,GAA8B;AAC5B;AACA,0BAAK,CAAL,EAAQ,+BAAR;AACA,0BAAK,CAAL,EAAS,QAAO,gBAAOC,IAAP,CAAY,yBAAZ,CAAuC,+BAAvD;AACA;AACD;;AAED,SAAOF,aAAP,CAAsBF,WAAW,EAAjC,EAAqC;AACnC,QAAI,CAACA,SAASK,MAAd,EAAsB;AACpBX,qBAAeS,mBAAf;AACAG,cAAQC,IAAR,CAAa,CAAb;AACD;AACD;AACA,0BAAK,CAAL,EAAQ,gBAAR;AACA;AACAP,aAASQ,OAAT,CAAiBd,eAAee,YAAf,CAA4BC,IAA5B,CAAiC,IAAjC,CAAjB;AACD;;AAED,SAAOD,YAAP,CAAqBE,OAArB,EAA8B;AAC5B,UAAMC,QAAQ,OAAOD,QAAQE,WAAf,KAA+B,UAA/B,IAA6CF,QAAQE,WAAR,EAA3D;AACA,0BAAK,EAAL,EAAU,GAAE,gBAAOC,GAAP,CAAW,MAAX,CAAmB,KAAI,gBAAOV,IAAP,CAAYO,QAAQI,IAApB,CAA0B,EAA7D;;AAEA,QAAIJ,QAAQK,aAAZ,EAA2B;AACzB,4BAAK,EAAL,EAAU,GAAE,gBAAOF,GAAP,CAAW,KAAX,CAAkB,KAAI,gBAAOV,IAAP,CAAYO,QAAQM,MAAR,EAAZ,CAA8B,EAAhE;AACD;;AAED,QAAIN,QAAQE,WAAR,EAAJ,EAA2B;AACzB,4BAAK,EAAL,EAAU,GAAE,gBAAOC,GAAP,CAAW,OAAX,CAAoB,KAAI,gBAAOV,IAAP,CAAYQ,KAAZ,CAAmB,EAAvD;AACD;;AAED,2BAAM,CAAN,EAAU,GAAE,gBAAOE,GAAP,CAAW,eAAX,CAA4B,GAAxC;AACA,0BAAM,IAAG,gBAAOV,IAAP,CAAYO,QAAQO,MAAR,CAAeC,cAAf,GAAgC,gBAAOC,KAAP,CAAa,GAAb,CAAhC,GAAoD,gBAAOC,GAAP,CAAW,GAAX,CAAhE,CAAiF,EAA1F;;AAEA,QAAI,CAACV,QAAQK,aAAb,EAA4B;AAC1B,4BAAK,CAAL,EAAS,GAAE,gBAAOF,GAAP,CAAW,QAAX,CAAqB,KAAI,gBAAOQ,OAAP,CAAe,YAAf,CAA6B,EAAjE;AACD,KAFD,MAEO;AACL,4BAAK,CAAL,EAAS,GAAE,gBAAOR,GAAP,CAAW,aAAX,CAA0B,KAAIH,QAAQY,UAAR,GAAsB,GAAE,gBAAOH,KAAP,CAAa,GAAb,CAAkB,EAA1C,GAA+C,GAAE,gBAAOC,GAAP,CAAW,GAAX,CAAgB,EAAE,EAA5G;AACD;;AAED,QAAIV,QAAQa,KAAZ,EAAmB;AACjB,YAAMC,iBAAiB;AACrB,aAAM,QAAO,gBAAOL,KAAP,CAAc,4BAA2BT,QAAQI,IAAK,EAAtD,CAAyD;AADjD,OAAvB;;AAIA;AACA,4BAAK,CAAL,EAAQU,eAAed,QAAQa,KAAvB,CAAR;AACD;AACD;AACD;AA5DkB;;kBA+DN9B,c","file":"hosting-list.js","sourcesContent":["import format from 'chalk'\n\nimport { echo, echon } from '../utils/print-tools'\nimport Hosting from '../utils/hosting'\n\nclass HostingListCmd {\n  constructor (context) {\n    this.context = context\n    this.session = context.session\n  }\n\n  async run ([cmd]) {\n    this.cmd = cmd\n    const hostings = await Hosting.list()\n    HostingListCmd.printHostings(hostings)\n  }\n\n  static printNoHostingsInfo () {\n    echo()\n    echo(4)('You don\\'t have any hostings!')\n    echo(4)(`Type ${format.cyan('syncano-cli hosting add')} to add hosting for your app!`)\n    echo()\n  }\n\n  static printHostings (hostings = []) {\n    if (!hostings.length) {\n      HostingListCmd.printNoHostingsInfo()\n      process.exit(0)\n    }\n    echo()\n    echo(4)('Your hostings:')\n    echo()\n    hostings.forEach(HostingListCmd.printHosting.bind(this))\n  }\n\n  static printHosting (hosting) {\n    const cname = typeof hosting.getCnameURL === 'function' && hosting.getCnameURL()\n    echo(11)(`${format.dim('name')}: ${format.cyan(hosting.name)}`)\n\n    if (hosting.existRemotely) {\n      echo(12)(`${format.dim('URL')}: ${format.cyan(hosting.getURL())}`)\n    }\n\n    if (hosting.getCnameURL()) {\n      echo(10)(`${format.dim('CNAME')}: ${format.cyan(cname)}`)\n    }\n\n    echon(2)(`${format.dim('BrowserRouter')}:`)\n    echo(` ${format.cyan(hosting.config.browser_router ? format.green('✓') : format.red('x'))}`)\n\n    if (!hosting.existRemotely) {\n      echo(9)(`${format.dim('status')}: ${format.magenta('not synced')}`)\n    } else {\n      echo(4)(`${format.dim('sync status')}: ${hosting.isUpToDate ? `${format.green('✓')}` : `${format.red('x')}`}`)\n    }\n\n    if (hosting.error) {\n      const errorResponses = {\n        404: `Type ${format.green(`syncano-cli hosting sync ${hosting.name}`)} to sync your hosting with server.`\n      }\n\n      echo()\n      echo(4)(errorResponses[hosting.error])\n    }\n    echo()\n  }\n}\n\nexport default HostingListCmd\n"]}