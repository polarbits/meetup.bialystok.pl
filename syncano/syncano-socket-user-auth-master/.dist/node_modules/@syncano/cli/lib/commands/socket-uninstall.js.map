{"version":3,"sources":["../../src/commands/socket-uninstall.js"],"names":["SocketUnInstall","constructor","context","session","Socket","run","socketName","cmd","confirmation","type","name","message","red","default","socket","get","existLocally","existRemotely","process","exit","promptResponse","prompt","confirm","uninstall","isProjectRegistryDependency","cyan","green","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAEA;;AACA;;;;;;AAEe,MAAMA,eAAN,CAAsB;AACnCC,cAAaC,OAAb,EAAsB;AACpB,SAAKC,OAAL,GAAeD,QAAQC,OAAvB;AACA,SAAKC,MAAL,GAAcF,QAAQE,MAAtB;AACD;;AAEKC,KAAN,CAAW,CAACC,UAAD,EAAaC,GAAb,CAAX,EAA8B;AAAA;;AAAA;AAC5B,YAAMC,eAAe,CAAC;AACpBC,cAAM,SADc;AAEpBC,cAAM,SAFc;AAGpBC,iBAAS,mBAAE,CAAF,EAAM,oCAAmC,gBAAOC,GAAP,CAAWN,UAAX,CAAuB,EAAhE,CAHW;AAIpBO,iBAAS;AAJW,OAAD,CAArB;;AAOA,YAAMC,SAAS,MAAM,MAAKV,MAAL,CAAYW,GAAZ,CAAgBT,UAAhB,CAArB;;AAEA,UAAI,CAACQ,OAAOE,YAAR,IAAwB,CAACF,OAAOG,aAApC,EAAmD;AACjD;AACAC,gBAAQC,IAAR,CAAa,CAAb;AACD;;AAED,YAAMC,iBAAiB,MAAM,mBAASC,MAAT,CAAgBb,YAAhB,CAA7B;AACA,UAAI,CAACY,eAAeE,OAApB,EAA6BJ,QAAQC,IAAR;AAC7B;;AAEA,UAAI;AACF,cAAM,MAAKf,MAAL,CAAYmB,SAAZ,CAAsBT,MAAtB,CAAN;;AAEA,YAAIA,OAAOU,2BAAX,EAAwC;AACtC,gCAAK,CAAL,EAAS,UAAS,gBAAOC,IAAP,CAAYX,OAAOJ,IAAnB,CAAyB,mDAA3C;AACD;AACD,YAAII,OAAOE,YAAX,EAAyB;AACvB,gCAAK,CAAL,EAAS,UAAS,gBAAOS,IAAP,CAAYX,OAAOJ,IAAnB,CAAyB,8CAA3C;AACD;AACD,YAAII,OAAOG,aAAX,EAA0B;AACxB,gCAAK,CAAL,EAAS,UAAS,gBAAOQ,IAAP,CAAYX,OAAOJ,IAAnB,CAAyB,sCAA3C;AACD;;AAED,8BAAK,CAAL,EAAS,UAAS,gBAAOe,IAAP,CAAYX,OAAOJ,IAAnB,CAAyB,aAAY,gBAAOgB,KAAP,CAAa,cAAb,CAA6B,WAApF;AACA;AACD,OAfD,CAeE,OAAOC,GAAP,EAAY;AACZ,iCAAQA,GAAR;AACA;AACD;AArC2B;AAsC7B;AA5CkC;kBAAhB3B,e","file":"socket-uninstall.js","sourcesContent":["import format from 'chalk'\nimport inquirer from 'inquirer'\n\nimport { socketNotFound } from './helpers/socket'\nimport { echo, warning, p } from '../utils/print-tools'\n\nexport default class SocketUnInstall {\n  constructor (context) {\n    this.session = context.session\n    this.Socket = context.Socket\n  }\n\n  async run ([socketName, cmd]) {\n    const confirmation = [{\n      type: 'confirm',\n      name: 'confirm',\n      message: p(2)(`Are you sure you want to remove: ${format.red(socketName)}`),\n      default: false\n    }]\n\n    const socket = await this.Socket.get(socketName)\n\n    if (!socket.existLocally && !socket.existRemotely) {\n      socketNotFound()\n      process.exit(1)\n    }\n\n    const promptResponse = await inquirer.prompt(confirmation)\n    if (!promptResponse.confirm) process.exit()\n    echo()\n\n    try {\n      await this.Socket.uninstall(socket)\n\n      if (socket.isProjectRegistryDependency) {\n        echo(4)(`Socket ${format.cyan(socket.name)} has been removed from the project config file...`)\n      }\n      if (socket.existLocally) {\n        echo(4)(`Socket ${format.cyan(socket.name)} has been removed from the project folder...`)\n      }\n      if (socket.existRemotely) {\n        echo(4)(`Socket ${format.cyan(socket.name)} has been removed from the server...`)\n      }\n\n      echo(4)(`Socket ${format.cyan(socket.name)} has been ${format.green('successfully')} removed!`)\n      echo()\n    } catch (err) {\n      warning(err)\n      echo()\n    }\n  }\n}\n"]}