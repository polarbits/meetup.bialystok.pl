{"version":3,"sources":["../../src/utils/raven.js"],"names":["debug","info","process","env","NODE_ENV","disableConsoleAlerts","CLI_SENTRY_DSN","dataCallback","data","newData","Object","assign","user","project","instance","host","HOST","params","release","version","environment","captureUnhandledRejections","config","install"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAM,EAAEA,KAAF,EAASC,IAAT,KAAkB,qBAAO,aAAP,CAAxB;;kBAEe,MAAM;AACnB,MAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AACnCH,SAAK,wBAAL;AACA,oBAAMI,oBAAN;AACD;;AAED,QAAMC,iBAAiB,4FAAvB;;AAEA,QAAMC,eAAgBC,IAAD,IAAU;AAC7BR,UAAM,cAAN;AACA,UAAMS,UAAUC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,IAAlB,CAAhB;AACAC,YAAQG,IAAR,GAAe;AACbC,eAAS,kBAAQA,OAAR,GAAkB,kBAAQA,OAAR,CAAgBC,QAAlC,GAA6C,IADzC;AAEbC,YAAM,kBAAQC;AAFD,KAAf;AAIA,WAAOP,OAAP;AACD,GARD;;AAUA,QAAMQ,SAAS;AACbC,aAAS,kBAAMC,OADF;AAEbC,iBAAalB,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MAAzB,GAAkC,SAAlC,GAA8C,YAF9C;AAGbG,gBAHa;AAIbc,gCAA4B;AAJf,GAAf;;AAOA,kBAAMC,MAAN,CAAahB,cAAb,EAA6BW,MAA7B,EAAqCM,OAArC;AACD,C","file":"raven.js","sourcesContent":["import Raven from 'raven'\nimport pjson from '../../package.json'\nimport session from './session'\nimport logger from './debug'\n\nconst { debug, info } = logger('utils-raven')\n\nexport default () => {\n  if (process.env.NODE_ENV !== 'test') {\n    info('Disabling raven alerts')\n    Raven.disableConsoleAlerts()\n  }\n\n  const CLI_SENTRY_DSN = 'https://ffed6f289ae7416f84a113aba08f35c3:d1b25e9121164692b0ef4c1de84cdf02@sentry.io/135248'\n\n  const dataCallback = (data) => {\n    debug('dataCallback')\n    const newData = Object.assign({}, data)\n    newData.user = {\n      project: session.project ? session.project.instance : null,\n      host: session.HOST\n    }\n    return newData\n  }\n\n  const params = {\n    release: pjson.version,\n    environment: process.env.NODE_ENV === 'test' ? 'staging' : 'production',\n    dataCallback,\n    captureUnhandledRejections: true\n  }\n\n  Raven.config(CLI_SENTRY_DSN, params).install()\n}\n"]}