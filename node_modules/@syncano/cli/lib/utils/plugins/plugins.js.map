{"version":3,"sources":["../../../src/utils/plugins/plugins.js"],"names":["debug","Plugins","constructor","session","plugins","settings","project","getPlugins","load","program","Object","keys","forEach","pluginName","PluginImport","require","default","command","description","action","options","run","err"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAEA,MAAM,EAAEA,KAAF,KAAY,qBAAO,eAAP,CAAlB;;AAEe,MAAMC,OAAN,CAAc;AAC3BC,cAAaC,OAAb,EAAsB;AACpB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,OAAL,GAAeD,QAAQE,QAAR,CAAiBC,OAAjB,CAAyBC,UAAzB,MAAyC,EAAxD;AACD;;AAEDC,OAAMC,OAAN,EAAe;AACbT,UAAM,QAAN;AACAU,WAAOC,IAAP,CAAY,KAAKP,OAAjB,EAA0BQ,OAA1B,CAAmCC,UAAD,IAAgB;AAChD;AACA;AACAb,YAAM,iBAAN,EAAyBa,UAAzB;AACA,UAAI;AACF,cAAMC,eAAeC,QAAQ,KAAKX,OAAL,CAAaS,UAAb,CAAR,EAAkCG,OAAvD;AACAP,gBACGQ,OADH,CACWJ,UADX,EAEGK,WAFH,CAEeL,UAFf,EAGGM,MAHH,CAGU,CAAC,GAAGC,OAAJ,KAAgB;AACtB,cAAIN,YAAJ,GAAmBO,GAAnB,CAAuB,EAAElB,SAAS,KAAKA,OAAhB,EAAyBiB,OAAzB,EAAvB;AACD,SALH;AAMD,OARD,CAQE,OAAOE,GAAP,EAAY;AACZ,iCAAQ,6BAAR,EAAuC,KAAKlB,OAAL,CAAaS,UAAb,CAAvC;AACD;AACF,KAfD;AAgBD;AAxB0B;kBAARZ,O","file":"plugins.js","sourcesContent":["import logger from '../debug'\nimport { warning } from '../print-tools'\n\nconst { debug } = logger('utils-plugins')\n\nexport default class Plugins {\n  constructor (session) {\n    this.session = session\n    this.plugins = session.settings.project.getPlugins() || []\n  }\n\n  load (program) {\n    debug('load()')\n    Object.keys(this.plugins).forEach((pluginName) => {\n      /* eslint-disable import/no-dynamic-require */\n      /* eslint-disable global-require */\n      debug('loading plugin:', pluginName)\n      try {\n        const PluginImport = require(this.plugins[pluginName]).default\n        program\n          .command(pluginName)\n          .description(pluginName)\n          .action((...options) => {\n            new PluginImport().run({ session: this.session, options })\n          })\n      } catch (err) {\n        warning('Error while loading plugin:', this.plugins[pluginName])\n      }\n    })\n  }\n}\n"]}